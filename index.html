<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' https: data:; style-src 'self'; script-src 'self' 'unsafe-inline'; object-src 'none'; base-uri 'self'; frame-ancestors 'none'; form-action 'self'; upgrade-insecure-requests" />
  <meta name="referrer" content="strict-origin-when-cross-origin" />
  <title>Calculadora de Café | Ratio por Método y Tazas</title>
  <meta name="description" content="Calcula cuántos gramos de café y mililitros de agua usar según método de preparación, número de tazas y nivel de intensidad." />
  <meta name="keywords" content="calculadora de café, ratio café agua, aeropress, chemex, v60, prensa francesa, moka italiana, cold brew, gramos de café por taza" />
  <meta name="author" content="Calculadora de Café" />
  <meta name="robots" content="index,follow,max-image-preview:large" />
  <meta name="theme-color" content="#E5810E" />
  <link rel="icon" type="image/png" href="favicon-app.png" />
  <meta name="application-name" content="Calculadora de Café" />
  <link rel="canonical" href="https://demo-cafe-calculadora.example/" />

  <meta property="og:type" content="website" />
  <meta property="og:locale" content="es_ES" />
  <meta property="og:url" content="https://demo-cafe-calculadora.example/" />
  <meta property="og:title" content="Calculadora de Café | Ratio por Método y Tazas" />
  <meta property="og:description" content="Obtén la proporción ideal de café y agua para AeroPress, Chemex, V60, Prensa, Moka y Cold Brew." />
  <meta property="og:site_name" content="Calculadora de Café" />
  <meta property="og:image" content="https://demo-cafe-calculadora.example/og-image-cafe.svg" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Calculadora de Café | Ratio por Método y Tazas" />
  <meta name="twitter:description" content="Calcula gramos de café y mililitros de agua según método, tazas e intensidad." />
  <meta name="twitter:image" content="https://demo-cafe-calculadora.example/og-image-cafe.svg" />

  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Calculadora de Café",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Any",
      "inLanguage": "es",
      "description": "Herramienta para calcular el ratio café-agua por método, número de tazas e intensidad.",
      "featureList": [
        "Selección de método: AeroPress, Chemex, V60, Prensa, Moka y Cold Brew",
        "Ajuste de intensidad del café",
        "Cálculo de gramos de café y mililitros de agua"
      ]
    }
  </script>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="bg-orb orb-1" aria-hidden="true"></div>
  <div class="bg-orb orb-2" aria-hidden="true"></div>
  <div class="bg-orb orb-3" aria-hidden="true"></div>

  <main id="maindiv">
    <header class="glass hero">
      <div class="hero-top">
        <div class="logo-shell">
          <img src="logoadonay.svg" alt="Logo Adonay" class="hero-logo" />
        </div>
        <div class="hero-content">
          <p class="eyebrow">Coffee Ratio Studio</p>
          <h1>Calculadora de Café</h1>
          <p class="hero-text">Define método, cantidad y fuerza. Obtén una receta equilibrada.</p>
          <p class="current-method">Método actual: <strong id="currentMethod">AeroPress</strong></p>
        </div>
      </div>
    </header>

    <section class="glass section1">
      <h2 class="section-title">Tipo de cafetera</h2>
      <ul id="methods" class="methods-grid" role="listbox" aria-label="Selecciona método de preparación">
        <li class="brewingelements" data-method="aeropress" role="option" tabindex="0" aria-selected="false">
          <svg class="method-icon" viewBox="0 0 24 24" aria-hidden="true">
            <rect x="7.2" y="2" width="9.6" height="1.7" rx="0.8" />
            <line x1="12" y1="3.7" x2="12" y2="5.8" />
            <rect x="8.4" y="5.8" width="7.2" height="10.8" rx="1.6" />
            <line x1="7.9" y1="17.1" x2="16.1" y2="17.1" />
            <rect x="7" y="17.2" width="10" height="4.8" rx="1.6" />
            <line x1="6" y1="22.1" x2="18" y2="22.1" />
          </svg>
          <span>AeroPress</span>
        </li>
        <li class="brewingelements" data-method="chemex" role="option" tabindex="0" aria-selected="false">
          <svg class="method-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M6.2 4.8h11.6l-2.9 4.3H9.1z" />
            <rect x="7.5" y="9.8" width="9" height="2.2" rx="1" />
            <path d="M9.1 12c-2.7 2.9-3 7 .1 8.8h5.6c3.1-1.8 2.8-5.9.1-8.8" />
          </svg>
          <span>Chemex</span>
        </li>
        <li class="brewingelements" data-method="v60" role="option" tabindex="0" aria-selected="false">
          <svg class="method-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M5.3 6.7h13.4l-3.8 9.1H9.1z" />
            <line x1="12" y1="15.8" x2="12" y2="18" />
            <line x1="9.1" y1="18" x2="14.9" y2="18" />
            <rect x="7" y="18.2" width="10" height="3.2" rx="1.2" />
            <line x1="5.3" y1="22.1" x2="18.7" y2="22.1" />
            <line x1="8.2" y1="8.6" x2="10" y2="14.2" />
            <line x1="11" y1="8.2" x2="12.4" y2="14.5" />
            <line x1="13.8" y1="8.6" x2="15" y2="13.3" />
          </svg>
          <span>V60</span>
        </li>
        <li class="brewingelements" data-method="frenchpress" role="option" tabindex="0" aria-selected="false">
          <svg class="method-icon" viewBox="0 0 24 24" aria-hidden="true">
            <rect x="7.2" y="6.2" width="9.6" height="12.9" rx="2.2" />
            <rect x="6" y="3.8" width="12" height="2.6" rx="1.5" />
            <line x1="5.6" y1="6.7" x2="18.4" y2="6.7" />
            <line x1="12" y1="3.8" x2="12" y2="13.2" />
            <line x1="9.1" y1="13.2" x2="14.9" y2="13.2" />
            <circle cx="12" cy="2.6" r="0.9" fill="currentColor" />
            <rect x="17.3" y="8.1" width="2.3" height="8.4" rx="1.2" />
            <line x1="4.3" y1="21.1" x2="19.7" y2="21.1" />
          </svg>
          <span>Prensa</span>
        </li>
        <li class="brewingelements" data-method="moka" role="option" tabindex="0" aria-selected="false">
          <svg class="method-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M4.3 8.4L12 3.8l7.7 4.6" />
            <line x1="3.8" y1="9" x2="20.2" y2="9" />
            <path d="M5.5 9l2.6 4.6h7.8L18.5 9" />
            <line x1="7.4" y1="15" x2="16.6" y2="15" />
            <path d="M7.4 15l-1.5 5.8h12.2L16.6 15" />
            <path d="M19.7 9.4Q22 11 20.4 14" />
            <circle cx="12" cy="2.6" r="1.1" fill="currentColor" />
          </svg>
          <span>Moka</span>
        </li>
        <li class="brewingelements" data-method="coldbrew" role="option" tabindex="0" aria-selected="false">
          <svg class="method-icon" viewBox="0 0 24 24" aria-hidden="true">
            <line x1="12" y1="2.8" x2="12" y2="21.2" />
            <line x1="5.5" y1="6.2" x2="18.5" y2="17.8" />
            <line x1="5.5" y1="17.8" x2="18.5" y2="6.2" />
            <path d="M12 2.8l-1.4 1.4M12 2.8l1.4 1.4M12 21.2l-1.4-1.4M12 21.2l1.4-1.4" />
            <path d="M5.5 6.2h1.8M5.5 6.2v1.8M18.5 17.8h-1.8M18.5 17.8v-1.8" />
            <path d="M5.5 17.8h1.8M5.5 17.8v-1.8M18.5 6.2h-1.8M18.5 6.2v1.8" />
          </svg>
          <span>Cold Brew</span>
        </li>
      </ul>
      <p class="hint">Selecciona un método para activar la receta base.</p>
    </section>

    <section class="glass section1">
      <h2 class="section-title">Número de tazas</h2>
      <div class="row cups-row">
        <label for="cups" class="control-label">Tazas</label>
        <input id="cups" type="range" min="1" max="12" step="1" value="1" aria-describedby="cupsHelp" />
        <div class="value cup-value" aria-live="polite">
          <span id="cupsOut">1</span>
          <svg class="cup-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M5 9h11v6a3 3 0 0 1-3 3H8a3 3 0 0 1-3-3z" />
            <path d="M16 10h1.5a2.5 2.5 0 0 1 0 5H16" />
            <line x1="8" y1="6" x2="8" y2="8" />
            <line x1="11" y1="5.5" x2="11" y2="8" />
            <line x1="14" y1="6" x2="14" y2="8" />
          </svg>
        </div>
      </div>
      <p class="hint" id="cupsHelp">El volumen por taza cambia automáticamente según el método elegido.</p>
    </section>

    <section class="glass section1">
      <h2 class="section-title">Intensidad y unidades</h2>
      <div class="row controls-row">
        <div class="control-group">
          <label for="strength" class="control-label">Intensidad</label>
          <select id="strength">
            <option value="0.75">Muy suave</option>
            <option value="0.85">Suave</option>
            <option value="1" selected>Normal</option>
            <option value="1.2">Un poco fuerte</option>
            <option value="1.5">Fuerte</option>
            <option value="2">Muy fuerte</option>
          </select>
        </div>
        <div class="control-group">
          <label for="unit" class="control-label">Unidad de agua</label>
          <select id="unit">
            <option value="ml" selected>Mililitros (ml)</option>
            <option value="oz">Onzas (oz)</option>
          </select>
        </div>
        <span class="pill" id="ratioPreview" aria-live="polite">Ratio: -</span>
      </div>
      <p class="hint">A más intensidad, menor ratio y mayor cantidad de café.</p>
    </section>

    <section class="glass section1">
      <div class="advanced-header">
        <h2 class="section-title">Modo avanzado</h2>
        <button class="text-btn" id="toggleAdvanced" type="button" aria-expanded="false" aria-controls="advancedPanel">Editar ratios base</button>
      </div>
      <div id="advancedPanel" class="advanced-panel" hidden>
        <div class="advanced-grid">
          <label>AeroPress <input type="number" min="6" max="25" step="0.1" data-ratio-method="aeropress" /></label>
          <label>Chemex <input type="number" min="6" max="25" step="0.1" data-ratio-method="chemex" /></label>
          <label>V60 <input type="number" min="6" max="25" step="0.1" data-ratio-method="v60" /></label>
          <label>Prensa <input type="number" min="6" max="25" step="0.1" data-ratio-method="frenchpress" /></label>
          <label>Moka italiana <input type="number" min="6" max="25" step="0.1" data-ratio-method="moka" /></label>
          <label>Cold Brew <input type="number" min="4" max="25" step="0.1" data-ratio-method="coldbrew" /></label>
        </div>
      </div>
      <p class="hint">Puedes ajustar el ratio base por método y se guarda localmente.</p>
    </section>

    <section class="glass section1 results-panel" id="resultsPanel">
      <div class="actions-row">
        <button class="btn btn-secondary" id="copyRecipe" type="button">Copiar receta</button>
        <button class="btn btn-secondary" id="reset" type="button">Restablecer</button>
      </div>

      <p id="errorMsg" class="error" aria-live="polite"></p>

      <div class="results">
        <article class="metric-card">
          <p class="metric-label">Café</p>
          <p class="metric-value" aria-live="polite"><span id="coffeeG">-</span><small>g</small></p>
        </article>
        <article class="metric-card">
          <p class="metric-label">Agua</p>
          <p class="metric-value" aria-live="polite"><span id="waterMl">-</span><small id="waterUnit">ml</small></p>
        </article>
      </div>
      <p class="hint meta-line" id="meta"></p>
      <p class="hint" id="ratioRange" aria-live="polite"></p>
      <p class="hint" id="grindHint" aria-live="polite"></p>
      <p class="hint" id="methodHint" aria-live="polite"></p>

      <h3 class="steps-title">Guía rápida</h3>
      <ol class="steps" id="brewSteps"></ol>
    </section>
  </main>

  <aside class="quick-summary" id="quickSummary" aria-live="polite">
    <div class="quick-summary-values">
      <p><strong>Café</strong> <span id="stickyCoffee">-</span> g</p>
      <p><strong>Agua</strong> <span id="stickyWater">-</span> <span id="stickyWaterUnit">ml</span></p>
    </div>
    <button class="quick-summary-btn" id="jumpToResults" type="button">Ver detalle</button>
  </aside>

  <script type="module" src="script.js"></script>
</body>
</html>
